<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        
        
        <link rel="shortcut icon" href="../img/favicon.ico">
        <title>User Guide - GENAI Evaluation</title>
        <link href="../css/bootstrap.min.css" rel="stylesheet">
        <link href="../css/font-awesome.min.css" rel="stylesheet">
        <link href="../css/base.css" rel="stylesheet">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css">
        <link href="../assets/_mkdocstrings.css" rel="stylesheet">
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
        <script>hljs.highlightAll();</script> 
    </head>

    <body>
        <div class="navbar fixed-top navbar-expand-lg navbar-dark bg-primary">
            <div class="container">
                <a class="navbar-brand" href="..">GENAI Evaluation</a>
                <!-- Expander button -->
                <button type="button" class="navbar-toggler" data-toggle="collapse" data-target="#navbar-collapse">
                    <span class="navbar-toggler-icon"></span>
                </button>

                <!-- Expanded navigation -->
                <div id="navbar-collapse" class="navbar-collapse collapse">
                        <!-- Main navigation -->
                        <ul class="nav navbar-nav">
                            <li class="navitem">
                                <a href=".." class="nav-link">Getting Started</a>
                            </li>
                            <li class="navitem">
                                <a href="../api_reference/" class="nav-link">API Reference</a>
                            </li>
                            <li class="navitem active">
                                <a href="./" class="nav-link">User Guide</a>
                            </li>
                        </ul>

                    <ul class="nav navbar-nav ml-auto">
                            <li class="nav-item">
                                <a rel="prev" href="../api_reference/" class="nav-link">
                                    <i class="fa fa-arrow-left"></i> Previous
                                </a>
                            </li>
                            <li class="nav-item">
                                <a rel="next" class="nav-link disabled">
                                    Next <i class="fa fa-arrow-right"></i>
                                </a>
                            </li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="container">
            <div class="row">
                    <div class="col-md-3"><div class="navbar-light navbar-expand-md bs-sidebar hidden-print affix" role="complementary">
    <div class="navbar-header">
        <button type="button" class="navbar-toggler collapsed" data-toggle="collapse" data-target="#toc-collapse" title="Table of Contents">
            <span class="fa fa-angle-down"></span>
        </button>
    </div>

    
    <div id="toc-collapse" class="navbar-collapse collapse card bg-secondary">
        <ul class="nav flex-column">
            
            <li class="nav-item" data-level="1"><a href="#user-guide" class="nav-link">User Guide</a>
              <ul class="nav flex-column">
            <li class="nav-item" data-level="2"><a href="#synthetic-vs-real-data-evaluation" class="nav-link">Synthetic vs Real Data Evaluation</a>
              <ul class="nav flex-column">
              </ul>
            </li>
              </ul>
            </li>
        </ul>
    </div>
</div></div>
                    <div class="col-md-9" role="main">

<h1 id="user-guide">User Guide</h1>
<h2 id="synthetic-vs-real-data-evaluation">Synthetic vs Real Data Evaluation</h2>
<ul>
<li>Typically <strong>multivariate_ecdf</strong> &amp; <strong>ks_statistic</strong> functions are used for evaluating real &amp; synthetic tabular data having all <strong>numerical columns</strong>.</li>
<li>Real data is split into training &amp; validation data. Synthetic data is generated based on the training data and then evaluated with validation.</li>
<li>When calling the ECDF function, the first argument must be the real data used to produce the synthetization, and the second argument the synthesized data . In a cross-validation setting, the first argument should be the validation data: a portion of the real data called holdout, and not used to train the synthesizer. The reason for this is that the real or validation set is used as the reference dataset. The goal is to test whether the distribution observed in the synthetization matches that in the real or validation set, not the other way around.</li>
<li>The ECDF is approximated using a number of locations in the feature space, specified by the argument n_nodes. The larger n_nodes, the better the approximation, leading to a more accurate KS_statistic. This is especially important in cross-validation when comparing the KS distance between the validation set and synthetized data, with KS_Base measuring the distance between the validation and training sets. If both distances are very similar, indicating a good synthetization, you may increase n_nodes to get a more refined evaluation. Increasing n_nodes results in more computing time.</li>
<li>For a symmetrical distance, use KS_symmetrical = max(KS_1, KS_2) with KS_1 = KS(validation, synthetic) and KS_2 = KS(synthetic, validation).You may replace validation by real or training data, if you do not perform cross-validation.  </li>
</ul>
<pre><code class="language-python">import pandas as pd
import numpy as np
from genai_evaluation import multivariate_ecdf, ks_statistic

random_seed = 42
n_nodes = 5000
verbose = True

# Simulate a real dataset
real_data = pd.DataFrame(np.random.rand(1000, 5), columns=['x1', 'x2', 'x3', 'x4', 'x5'])

#Split real data into 50-50% training &amp; validation dataset
training_data = real_data.sample(frac = 0.5)
validation_data = real_data.drop(training_data.index)

# Simulate a synthetic dataset
synthetic_data = pd.DataFrame(np.random.rand(500, 5), columns=['x1', 'x2', 'x3', 'x4', 'x5'])

# Calculate ECDFs 
_, ecdf_val1, ecdf_synth = \
            multivariate_ecdf(validation_data, 
                              synthetic_data, 
                              n_nodes = n_nodes,
                              verbose = verbose,
                              random_seed=random_seed)

_, ecdf_val2, ecdf_train = \
            multivariate_ecdf(validation_data, 
                              training_data, 
                              n_nodes = n_nodes,
                              verbose = verbose,
                              random_seed=random_seed)

ks_stat = ks_statistic(ecdf_val1, ecdf_synth)
base_ks_stat = ks_statistic(ecdf_val2, ecdf_train)                              

print(f&quot;KS Stat (Synth vs Validation): {ks_stat:.5f}&quot;)
print(f&quot;Base KS Stat (Train vs Validation): {base_ks_stat:.5f}&quot;)
print(f&quot;Absolute Diff {np.abs((ks_stat-base_ks_stat)**2):.5f}&quot;)
</code></pre></div>
            </div>
        </div>

        <footer class="col-md-12">
            <hr>
            <p>Documentation built with <a href="https://www.mkdocs.org/">MkDocs</a>.</p>
        </footer>
        <script src="../js/jquery-3.6.0.min.js"></script>
        <script src="../js/bootstrap.min.js"></script>
        <script>
            var base_url = "..",
                shortcuts = {"help": 191, "next": 78, "previous": 80, "search": 83};
        </script>
        <script src="../js/base.js"></script>

        <div class="modal" id="mkdocs_keyboard_modal" tabindex="-1" role="dialog" aria-labelledby="keyboardModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="keyboardModalLabel">Keyboard Shortcuts</h4>
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
            </div>
            <div class="modal-body">
              <table class="table">
                <thead>
                  <tr>
                    <th style="width: 20%;">Keys</th>
                    <th>Action</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td class="help shortcut"><kbd>?</kbd></td>
                    <td>Open this help</td>
                  </tr>
                  <tr>
                    <td class="next shortcut"><kbd>n</kbd></td>
                    <td>Next page</td>
                  </tr>
                  <tr>
                    <td class="prev shortcut"><kbd>p</kbd></td>
                    <td>Previous page</td>
                  </tr>
                  <tr>
                    <td class="search shortcut"><kbd>s</kbd></td>
                    <td>Search</td>
                  </tr>
                </tbody>
              </table>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div>

    </body>
</html>
